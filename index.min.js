$(function(){var a=Backbone.Model.extend({"default":{total:"",rolls:"",dice:""}}),b=Backbone.Collection.extend({model:a}),c=new b,d=Backbone.View.extend({template:_.template($("#item-template").html()),initialize:function(){this.listenTo(this.model,"change",this.render)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this}}),e=Backbone.View.extend({el:$("#App"),events:{"click .js-roll":"roll"},initialize:function(){this.listenTo(c,"add",this.addOne)},roll:function(){var f,g,h,i,a=$("#sides").val(),b=$("#dice").val(),d=[],e=0;for(f=b-1;f>=0;f--)g=parseInt(Math.random()*a,10),d.push(g),e+=g;h=d.join(" "),i=b+"D"+a,c.create({total:e,rolls:h,dice:i})},addOne:function(a){var b=new d({model:a});this.$("#list").prepend(b.render().el)}});new e});